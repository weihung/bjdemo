window.__require=function t(e,n,a){function l(o,i){if(!n[o]){if(!e[o]){var s=o.split("/");if(s=s[s.length-1],!e[s]){var r="function"==typeof __require&&__require;if(!i&&r)return r(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+o+"'")}}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){return l(e[o][1][t]||t)},u,u.exports,t,e,n,a)}return n[o].exports}for(var c="function"==typeof __require&&__require,o=0;o<a.length;o++)l(a[o]);return l}({Api:[function(t,e,n){"use strict";cc._RF.push(e,"5ba8060fsVLq4GR27vA3rnI","Api");var a=t("Global");e.exports={post:function(t,e){e.token=a.token?a.token:"";var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://blackjack21.hopto.org/v1/"+t,n).then(function(t){return t.json()})}},cc._RF.pop()},{Global:"Global"}],Bet:[function(t,e,n){"use strict";cc._RF.push(e,"e7be51jipBB35qq8X7MlHOf","Bet");var a=t("../api/Ws"),l=t("Global");cc.Class({extends:cc.Component,properties:{balanceLabel:{default:null,type:cc.Label},amountLabel:{default:null,type:cc.Label},button:cc.Button,bet:cc.Integer},onLoad:function(){this.button.node.on("click",this.callback,this)},callback:function(t){var e=parseInt(this.bet);if(!(l.balance<e)){l.balance=l.balance-e;var n=parseInt(this.amountLabel.string)+e;this.amountLabel.string=n;var c={cmd:"Bet",betAmount:n};a.send(c)}},start:function(){}}),cc._RF.pop()},{"../api/Ws":"Ws",Global:"Global"}],BtnLogin:[function(t,e,n){"use strict";cc._RF.push(e,"672544/yr1DLqZNjbUZB1/+","BtnLogin");var a=t("../api/Api"),l=t("Global");cc.Class({extends:cc.Component,properties:{username:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},button:cc.Button},onLoad:function(){this.button.node.on("click",this.callback,this)},callback:function(t){t.detail;var e={username:this.username.string,password:this.password.string};a.post("login",e).then(function(t){200==t.code&&(l.token=t.data.token,cc.director.loadScene("table"))}).catch(function(t){console.log(t)})},start:function(){}}),cc._RF.pop()},{"../api/Api":"Api",Global:"Global"}],BtnRegister:[function(t,e,n){"use strict";cc._RF.push(e,"e8bc1ANtv1JGLuBA2ofuptw","BtnRegister");var a=t("../api/Api"),l=t("Global");cc.Class({extends:cc.Component,properties:{username:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},button:cc.Button},onLoad:function(){this.button.node.on("click",this.callback,this)},callback:function(t){t.detail;var e={username:this.username.string,password:this.password.string};a.post("register",e).then(function(t){200==t.code&&(l.token=t.data.token,cc.director.loadScene("table"))}).catch(function(t){console.log(t)})},start:function(){}}),cc._RF.pop()},{"../api/Api":"Api",Global:"Global"}],CardPic:[function(t,e,n){"use strict";cc._RF.push(e,"679e4uEbBJGdYeVm1r3XJMv","CardPic"),cc.Class({extends:cc.Component,properties:{point:cc.Label,suit:cc.Sprite,mainPic:cc.Sprite,cardBG:cc.Sprite,redTextColor:cc.Color.WHITE,blackTextColor:cc.Color.WHITE,texFrontBG:cc.SpriteFrame,texBackBG:cc.SpriteFrame,texFaces:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame}},init:function(t){var e=t.point>10;this.mainPic.spriteFrame=e?this.texFaces[t.point-10-1]:this.texSuitBig[t.suit-1],this.point.string=t.pointName,t.isRedSuit?this.point.node.color=this.redTextColor:this.point.node.color=this.blackTextColor,this.suit.spriteFrame=this.texSuitSmall[t.suit-1]},reveal:function(t){this.point.node.active=t,this.suit.node.active=t,this.mainPic.node.active=t,this.cardBG.spriteFrame=t?this.texFrontBG:this.texBackBG}}),cc._RF.pop()},{}],Card:[function(t,e,n){"use strict";cc._RF.push(e,"ecd42aIDKJEu48PnoPuwXKn","Card");var a=t("../api/Ws");cc.Class({extends:cc.Component,properties:{labelB:{default:null,type:cc.Label},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},label3:{default:null,type:cc.Label},label4:{default:null,type:cc.Label},label5:{default:null,type:cc.Label}},onLoad:function(){var t=this;a.on("Deal",function(e){1===e.status&&(0===e.player&&(t.label1.string+=e.card+"\n"),1===e.player&&(t.label2.string+=e.card+"\n"),2===e.player&&(t.label3.string+=e.card+"\n"),3===e.player&&(t.label4.string+=e.card+"\n"),4===e.player&&(t.label5.string+=e.card+"\n"),-1===e.player&&(t.labelB.string+=e.card+"\n"))}),a.on("Result",function(e){1===e.status&&e.result.forEach(function(e){console.log(e);var n=t.labelB,a="";e.cards.forEach(function(t){a+=t+"\n"}),a+=e.win?"Win":"Lose",0==e.player?n=t.label1:1==e.player?n=t.label2:2==e.player?n=t.label3:3==e.player?n=t.label4:4==e.player&&(n=t.label5),n.string=a})})},update:function(t){}}),cc._RF.pop()},{"../api/Ws":"Ws"}],CountDown:[function(t,e,n){"use strict";cc._RF.push(e,"0a3f75uxEhC4bbGM+GymXdT","CountDown");var a=t("../api/Ws");cc.Class({extends:cc.Component,properties:{CountDownLabel:cc.Label,labelB:{default:null,type:cc.Label},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},label3:{default:null,type:cc.Label},label4:{default:null,type:cc.Label},label5:{default:null,type:cc.Label}},onLoad:function(){var t=this;a.on("CountDownStart",function(e){e.status<=0||(t.CountDownLabel.string=e.left>0?e.left:"",e.left<1&&(t.label1.string="",t.label2.string="",t.label3.string="",t.label4.string="",t.label5.string="",t.labelB.string=""))})},start:function(){}}),cc._RF.pop()},{"../api/Ws":"Ws"}],Global:[function(t,e,n){"use strict";cc._RF.push(e,"bfb4fXQpcNNz5E/tEE7K1bC","Global");var a="";e.exports={setToken:function(t){a=t},getToken:function(){return a}},cc._RF.pop()},{}],HitStand:[function(t,e,n){"use strict";cc._RF.push(e,"c8346zaB6lNCohqTNqBcUJW","HitStand");var a=t("../api/Ws");t("Global");cc.Class({extends:cc.Component,properties:{button:cc.Button,command:cc.String},onLoad:function(){this.button.node.on("click",this.callback,this)},callback:function(t){var e={cmd:this.command};a.send(e)},start:function(){}}),cc._RF.pop()},{"../api/Ws":"Ws",Global:"Global"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"7f811FaAOtCVawLrt4H/11N","Player");var a=t("../api/Ws");cc.Class({extends:cc.Component,properties:{Player1Label:cc.Label,Player2Label:cc.Label,Player3Label:cc.Label,Player4Label:cc.Label,Player5Label:cc.Label},onLoad:function(){var t=this;a.on("TablePlayer",function(e){1===e.status&&(t.Player1Label.string=e.players[0].name,t.Player2Label.string=e.players[1].name,t.Player3Label.string=e.players[2].name,t.Player4Label.string=e.players[3].name,t.Player5Label.string=e.players[4].name)}),a.on("Turn",function(e){if(1===e.status){var n=new cc.color(255,255,0),a=new cc.color(255,255,255);t.Player1Label.node.color=0===e.index?n:a,t.Player2Label.node.color=1===e.index?n:a,t.Player3Label.node.color=2===e.index?n:a,t.Player4Label.node.color=3===e.index?n:a,t.Player5Label.node.color=4===e.index?n:a}})},start:function(){}}),cc._RF.pop()},{"../api/Ws":"Ws"}],Table:[function(t,e,n){"use strict";cc._RF.push(e,"bf81cj59KZJHINX0I7Q3HDl","Table");var a=t("../api/Api"),l=t("Global"),c=t("../api/Ws");cc.Class({extends:cc.Component,properties:{balanceLabel:{default:null,type:cc.Label},amountLabel:{default:null,type:cc.Label},labelB:{default:null,type:cc.Label},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},label3:{default:null,type:cc.Label},label4:{default:null,type:cc.Label},label5:{default:null,type:cc.Label}},onLoad:function(){var t=this;l.balance||(l.balance=0),l.tableIndex||(l.tableIndex=0),l.position||(l.position=0),this.getBalance(),c.on("Join",function(e){e.status<=0&&(l.position++,l.position<5&&t.join())}),c.on("NewGame",function(e){1==e.status&&(t.amountLabel.string="0",t.getBalance())}),this.join()},getBalance:function(){a.post("balance",{}).then(function(t){200==t.code&&(l.balance=t.data.balance)}).catch(function(t){console.log(t)})},join:function(){var t={cmd:"Join",table:0,position:l.position};c.send(t)},update:function(t){this.balanceLabel.string=l.balance}}),cc._RF.pop()},{"../api/Api":"Api","../api/Ws":"Ws",Global:"Global"}],Ws:[function(t,e,n){"use strict";cc._RF.push(e,"a7d68UrhRFFxrwf7h2zPKty","Ws");var a,l=t("Global"),c="wss://blackjack21.hopto.org/v1/play",o={};(function t(){(a=new WebSocket(c)).onopen=function(){console.log("open connection")},a.onclose=function(){console.log("close connection"),setTimeout(function(){t()},1e3)},a.onmessage=function(t){console.log(t);var e=JSON.parse(t.data);o[e.cmd]&&o[e.cmd](e)}})(),e.exports={on:function(t,e){o[t]=e},send:function(t){t.token=l.token,a.send(JSON.stringify(t))}},cc._RF.pop()},{Global:"Global"}]},{},["Api","Global","Ws","BtnLogin","BtnRegister","Bet","Card","CardPic","CountDown","HitStand","Player","Table"]);